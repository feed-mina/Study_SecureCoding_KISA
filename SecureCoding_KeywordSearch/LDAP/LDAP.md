# LDAP LDAP 라이브러리 인터페이스 모듈

## LDAP인증이란?
### 참고사이트 : redhat
* **[https://www.redhat.com/ko/topics/security/what-is-ldap-authentication#:~:text=LDAP]**(https://www.redhat.com/ko/topics/security/what-is-ldap-authentication#:~:text=LDAP)
 
LDAP(Lightweight Directory Access Protocol)는 네트워크 상의 사용자, 파일, 장치 등의 정보를 중앙에서 관리하고 애플리케이션이 이 정보에 접근하여 사용자 인증 및 데이터 조회 등을 할 수 있게 해주는 표준 통신 프로토콜이다.
트리 구조의 디렉터리 서비스에서 데이터를 검색하고 편집하기 편리하게 만들며, TCP/IP 위에서 동작하여 중앙 집중식 인증 및 자원 관리를 가능하게 하는 것이 주요 역할이다.

핵심 기능 및 특징

디렉터리 서비스 접근
조직의 사용자, 그룹, 장치 등의 정보를 계층적으로 저장하고 관리하는 디렉터리 서비스에 접근하기 위한 규칙을 정의한다.

중앙 집중식 관리
대규모 환경에서 사용자 계정 및 자원 정보를 한 곳에서 효율적으로 관리할 수 있도록 한다.

인증 프로토콜
사용자가 로그인할 때 사용자 이름과 비밀번호를 디렉터리 서버에 확인하여 인증하는 데 사용된다.
예: 사용자가 로그인할 때마다 ID/PW를 서버에 보내 확인

표준 프로토콜
X.500 표준을 기반으로 하며 TCP/IP 위에서 동작하도록 단순화하여 성능을 개선했다.

계층적 구조
정보를 트리 형태로 구성하여 검색과 관리를 용이하게 한다.

어떻게 사용되나

클라이언트-서버 모델
서버의 PC 클라이언트(DUA)가 LDAP 서버(DSA)에 접속하여 데이터를 요청하고 응답받는 방식으로 동작한다.

애플리케이션 연동
다양한 애플리케이션(웹 서비스, 메일 시스템 등)이 LDAP를 통해 사용자 정보를 확인하고 인증을 처리하여 SSO와 유사한 통합 인증 환경을 구축하는 데 활용한다.

LDAP는 Lightweight Directory Access Protocol의 줄임말이며, 이름이 길어서 보통 LDAP라고 부른다.
쉽게 말하면 학교의 학생 명단을 관리하는 커다란 공책과 같다.

이 공책에는 학생 이름, 반, 전화번호 같은 정보가 층층이 정리되어 있다.
선생님이나 컴퓨터 프로그램이 이 공책을 보고 “이 학생이 우리 학교 학생 맞나요?” 하고 확인할 수 있다.

LDAP의 구조 (트리 구조)

LDAP는 정보를 나무 트리처럼 정리한다.

뿌리(root): 학교 전체
가지(branch): 학년, 반
잎(leaf): 학생 한 명 한 명

이렇게 나무처럼 층층이 정리되어 있어서 찾기가 쉽다.
예: 3학년 2반 홍길동

LDAP의 핵심 기능

디렉터리 서비스 접근
사용자, 그룹, 장치 정보를 층층이 정리된 공책에서 꺼내 볼 수 있다.

중앙 집중식 관리
여러 반이나 여러 학교를 따로 관리하지 않고 한 곳에서 모두 관리할 수 있다.

인증(로그인 확인)
학생이 교실에 들어올 때 “이 학생이 진짜 우리 학교 학생 맞아?” 하고 이름과 비밀번호를 확인한다.

표준 프로토콜
전 세계 어디서나 같은 규칙으로 사용하기 때문에 호환이 잘 된다.

계층적 구조
나무처럼 층층이 정리되어 있어서 검색이 편리하다.

LDAP는 어떻게 사용될까

클라이언트-서버 모델
학생(클라이언트)이 선생님(서버)에게 “저 학교 학생이에요”라고 말하면, 선생님은 공책(LDAP 디렉터리)을 보고 “맞네, 들어와도 괜찮아”라고 확인해준다.

애플리케이션 연동
웹사이트, 메일 시스템 같은 프로그램이 LDAP를 이용해 “이 사람이 진짜 사용자 맞아?”라고 확인해준다.
이렇게 하면 여러 서비스에서 한 번 로그인으로 다 사용할 수 있는 통합 로그인(SSO) 환경을 만들 수 있다.

사용자, 그룹, 장치 정보를 한 곳에서 관리하고 로그인할 때 진짜 사용자 맞는지 확인해주는 역할을 한다.
여러 프로그램이 LDAP를 통해 사용자 인증을 공유하여 편리한 통합 로그인 기능을 제공한다.

LDAP는 사용자가 조직, 구성원 등에 대한 데이터를 찾는 데 도움이 되는 프로토콜이다.
LDAP는 디렉터리에 데이터를 저장하고 사용자가 디렉터리에 접근할 수 있도록 인증하기 위해 주로 사용된다.
또한 애플리케이션이 디렉터리 서비스와 정보를 주고받는 데 필요한 통신 언어를 제공한다.

디렉터리 서비스는 네트워크 내에서 조직, 개인 및 기타 데이터에 대한 정보가 있는 위치에 접근할 권한을 관리한다.
가장 일반적인 LDAP 활용 사례는 디렉터리 서비스에 접근하여 해당 서비스를 관리할 수 있는 중앙 위치를 제공하는 것이다.

LDAP를 사용하는 조직은 조직, 조직의 사용자, 자산(사용자 이름, 암호 등)에 대한 정보를 저장, 관리, 보호할 수 있다.
LDAP는 정보 계층 구조를 제공하여 스토리지 접근을 간소화하는 데 도움이 되며, 기업이 성장하면서 더 많은 사용자 데이터와 자산을 확보함에 따라 중요해질 수 있다.

LDAP는 Kerberos, SSO(Single Sign-On), SASL(Simple Authentication and Security Layer), SSL(Secure Sockets Layer) 지원을 포함하여 사용자 인증을 목표로 하는 Identity 및 Access Management(IAM) 솔루션 역할을 하기도 한다.

LDAP와 Active Directory 비교

LDAP는 네트워크의 모든 사용자 계정을 포괄하는 정보가 포함된 대규모 디렉터리 서비스 데이터베이스인 Microsoft Active Directory(AD) 등에서 사용되는 핵심 프로토콜이다.
LDAP는 DAP(Directory Access Protocol)의 경량 버전으로 TCP/IP(Transmission Control Protocol / Internet Protocol)에서 실행되는 디렉터리 서비스에 접근하고 이를 관리하는 중앙 위치를 제공한다.

AD는 사용자와 그룹에 대한 인증 및 관리를 제공하며, 결국 사용자 또는 컴퓨터를 인증한다.
AD 데이터베이스에는 LDAP로 가져온 것보다 더 많은 속성이 포함되어 있다.
LDAP는 정보가 적은 디렉터리 오브젝트를 찾는 데 특화되어 있어 모든 속성을 추출할 필요가 없다.

LDAP의 주요 목표는 AD의 오브젝트(도메인, 사용자, 그룹 등)와 통신하고 이를 LDAP 서버의 디렉터리에서 사용할 수 있는 형식으로 추출하는 것이다.

LDAP 인증 프로세스

LDAP 인증 프로세스는 클라이언트-서버 인증 모델로 다음 요소로 구성된다.

DSA(Directory System Agent): 네트워크에서 LDAP를 실행하는 서버
DUA(Directory User Agent): DSA에 접근하는 클라이언트(사용자의 PC)
DN(Distinguished Name): DIT 경로가 포함된 고유 이름
예: cn=Susan, ou=users, o=Company
RDN(Relative Distinguished Name): DN 내 경로의 각 구성 요소

애플리케이션 프로그래밍 인터페이스(API)

API를 사용하면 다른 제품이나 서비스의 구현 방식을 몰라도 서로 통신할 수 있다.

사용자가 PC에서 LDAP 지원 클라이언트 프로그램에 접근하면 인증 프로세스가 시작된다.
SSO와 같은 단순 인증 또는 Kerberos 기반 SASL 인증을 거쳐 LDAP 서버에 바인딩된다.
사용자의 DN을 인증하는 요청이 전송되고, LDAP는 DN을 사용해 디렉터리에서 일치하는 오브젝트를 검색한다.

RDN은 DIT를 따라 검색 경로를 제공하므로 매우 중요하다.
유효한 RDN 경로가 없으면 검색 결과가 유효하지 않다.

사용자 검증이 완료되면 LDAP 서버는 바인딩을 해제하고, 인증된 사용자는 권한에 따라 파일, 사용자 정보, 애플리케이션 데이터 등에 접근할 수 있다.

LDAP 구성 요소 이해

LDAP는 경량 구조와 DIT를 사용해 빠른 검색을 제공한다.
DIT는 루트 디렉터리에서 시작해 국가, 도메인 구성 요소(dc), 조직(o)으로 분기된다.

dc=com, dc=example은 DNS 매핑을 통해 도메인을 IP 주소로 변환한다.
조직 이름(o)은 검색이 시작되는 일반적인 위치이며, 이후 조직 단위(ou)와 사용자(cn)로 분기된다.

속성 및 값

DIT의 각 클래스(o, ou, cn)는 속성과 값을 가지며, 스키마는 디렉터리 구조 정보를 정의한다.
예: cn=Susan에서 uid와 userPassword는 속성이고 로그인 정보는 값이다.

LDAP는 사용자 관리 프로세스를 간소화하고 인증을 중앙화한다.

## CWE-90 LDAP 인젝션
### 참고 사이트 : CWE
* **[https://cwe.mitre.org/data/definitions/90.html]**(https://cwe.mitre.org/data/definitions/90.html)

LDAP 쿼리에 사용되는 특수 요소를 적절히 중화하지 않으면 공격자가 쿼리를 변조하여 민감한 데이터를 조회하거나 수정할 수 있다.
완화 방안으로는 엄격한 입력 유효성 검사가 필요하다.

---

 